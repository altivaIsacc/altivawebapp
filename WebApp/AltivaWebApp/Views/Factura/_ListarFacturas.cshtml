@model IList<AltivaWebApp.Domains.FacturaBusqueda>
@inject IStringLocalizer<SharedResources> Lb

<div class="table-responsive">
    <table id="tblFacturas" class="table table-bordered">
        <thead>
            <tr>
                <th>
                    @Lb["N."]
                </th>
                <th>
                    @Lb["Hacienda"]
                </th>
                <th>
                    @Lb["Fecha"]
                </th>
                <th>
                    @Lb["Cliente"]
                </th>
                <th>
                    @Lb["Vendedor"]
                </th>
                <th>@Lb["PV"]</th>
                <th>
                    @Lb["Estado"]
                </th>
                <th style="text-align:right">
                    @Lb["Monto"]
                </th>
                <th>@Lb["Acción"]</th>
            </tr>
        </thead>
        <tbody>
            @{double total = 0;}
            @foreach (var item in Model)
            {
                total += item.TotalBase;
                <tr>
                    <td>@item.Id</td>
                    <td>0000000000</td>
                    <td>@item.FechaFactura</td>
                    <td>@item.NombreMostrar</td>
                    <td>@item.Vendedor</td>
                    <td>@item.PuntoVenta</td>
                    <td>@item.Estado</td>
                    <td style="text-align:right">@item.TotalBase.ToString("#,##0.00")</td>
                    <td><a href="@Url.Action("EditarFactura", new { id = item.Id })" class="btn btn-link" style="margin: 0; padding:0;"><i style="font-size:2rem" class="fas fa-edit"></i></a></td>
                </tr>
            }
            <tr>
                <td> </td>
                <td> </td>
                <td> </td>
                <td> </td>
                <td> </td>
                <td> </td>
                <td style="font-weight:bold">@Lb["Total"]:</td>
                <td style="text-align:right">@total.ToString("#,##0.00")</td>
                <td> </td>
            </tr>
        </tbody>
    </table>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js"></script>
<script>

    var tblFac;
    
    function filtroPuntoVenta(value) {
        
        tblFac
            .columns(5)
            .search(value)
            .draw();
    }
    $(document).ready(function () {
        inicializarTabla();
    });

    function inicializarTabla() {
        if (!$('#tblFacturas').DataTable == null) { 
        $('#tblFacturas').DataTable.destroy();
    }
        tblFac = $('#tblFacturas').DataTable({
            "paging": false,
            "info": false,
            "bSort": false,
            dom: 'Bfrtip',
            language: {
                "decimal": ".",
                "emptyTable": "@Lb["NoDatos"]",
                "info": "Mostrando _START_ a _END_ de _TOTAL_ Entradas",
                "infoEmpty": "Mostrando 0 to 0 of 0 Entradas",
                "infoFiltered": "(Filtrado de _MAX_ total entradas)",
                "infoPostFix": "",
                "thousands": ",",
                "lengthMenu": "@Lb["Mostrar"] _MENU_ @Lb["Entradas"]",
                "loadingRecords": "Cargando...",
                "processing": "Procesando...",
                "search": "<i class='fas fa-search'></i>",
                "zeroRecords": "@Lb["sinResultados"]",
                "paginate": {
                    "first": "@Lb["Primero"]",
                    "last": "@Lb["Último"]",
                    "next": "@Lb["Sguiente"]",
                    "previous": "@Lb["Anterior"]"
                }
            },
            buttons: [
                    {
                        extend: 'excelHtml5',
                        title: "@Lb["Facturas"]",
                        text:'Excel'
                        //Columns to export
                        //exportOptions: {
                       //     columns: [0, 1, 2, 3,4,5,6]
                       // }
                    }
            ]
        });
       $(".dataTables_searching").hide();
    }

</script>

<style>
    .dataTables_wrapper .dataTables_filter {
        float: right;
        text-align: right;
        visibility: hidden;
    }
</style>