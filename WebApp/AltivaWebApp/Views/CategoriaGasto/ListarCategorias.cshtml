@inject Microsoft.AspNetCore.Antiforgery.IAntiforgery Xsrf
@functions{
    public string GetAntiXsrfRequestToken()
    {
        return Xsrf.GetAndStoreTokens(Context).RequestToken;
    }
}
@inject IStringLocalizer<SharedResources> Lb


<div class="row">
    <div class="col-md-3">
        <h3>@Lb["CategoriaGastos"]</h3>
    </div>
    <div class="col-md-9">
        <p>
            <button class="btn btn-primary" onclick="crearEditarPartial(0)"><span>@Lb["Agregar"] </span>&nbsp;<i class="fas fa-plus-circle"></i></button>
        </p>
    </div>

    
</div>

<hr />

<div class="row">

    <div class="col-md-3 col-sm-4 col-xs-12">
        <label for="buscarPorNombre">@Lb["Buscar"]:</label>
        <input class="form-control" id="buscarPorNombre" type="text" placeholder="@Lb["Nombre"]" />
    </div>
    <div style="padding-top:0.4rem" class="col-md-2 col-sm-4 col-xs-12">
        <br />
        <button  class="btn btn-dark" id="btnEstado">@Lb["VerInactivos"]</button>
    </div>

</div>

<br />
<div class="row">
    <div class="col-md-12 col-sm-12 col-xs-12 table-responsive" id="tablaContenedor">

    </div>
</div>

<div class="row">
    <!-- Modal -->
    <div class="modal fade" id="modalCategoriaGasto" tabindex="-1" role="dialog" aria-labelledby="categoriaGastoModallabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body" id="crearEditarPartial">

                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {

        getCategoriaGasto();
    
    });

    function crearEditarPartial(id) {
         var url = "@Url.Action("_CrearCategoriaGasto")";
            if (id != 0) {
                url = '@Url.Action("_EditarCategoriaGasto", new { id = "__id__"})';
                url = url.replace("__id__", id);
            }
            
            $.ajax({
                type: "GET",
                headers: {
                    "RequestVerificationToken": '@GetAntiXsrfRequestToken()'
                },
                url: url,

                success: function (data) {
                    $('#crearEditarPartial').html(data);
                    $('#modalCategoriaGasto').modal('show');
                },
                error: function (err, scnd) {
                    console.log(err.statusText);
                }

            });
    }
    function getCategoriaGasto()
    {
       
            $.ajax({
                type: "GET",
                headers: {
                    "RequestVerificationToken": '@GetAntiXsrfRequestToken()'
                },
                url: '@Url.Action("_CategoriasGasto")',

                success: function (data) {
                    $('#tablaContenedor').html(data);
                },
                error: function (err, scnd) {
                    console.log(err.statusText);
                }

            });
    }


    

</script>