@model AltivaWebApp.Domains.TbFdTipoCliente
@inject Microsoft.AspNetCore.Antiforgery.IAntiforgery Xsrf
@functions{
    public string GetAntiXsrfRequestToken()
    {
        return Xsrf.GetAndStoreTokens(Context).RequestToken;
    }
}
<div class="container">
    <div class="col-md-12">
        <div class="row">
        

            
                
               
            

            <div class="form-group">
                <label> Nombre:</label>
                <div hidden>
                    <input type="text" asp-for="Id" id="idCliente" />
                    
                </div>
                <input type="text" class="form-control" id="nombreCliente" asp-for="Nombre" />
                <div class="AlertEditarNombre"></div>
            </div>

        </div>
        <div class="row">
           
                <button class="btn btn-success" onclick="btnEditarTipoCliente()" type="submit">Guardar</button>
            
           
            
            <button class=" btn btn-default" data-dismiss="modal">Cerrar</button>
        </div>
    </div>
</div>
<script>
//guardar subfamilia en base alas familias de los tipos
    function btnEditarSubFamilias() {
        if (ValidarDatos() == true) {
            var nombre = "";
            var nombre = "";
            nombre = $("#nombreCliente").val();
            var TipoClienteViewModels = {
                id: $('#idCliente').val(),
                idPadre: null,
                nombre: nombre,
                inactivo: false
            };
            var urls = '@Url.Action("EditarTipoCliente", "TipoCliente")';
            $.ajax({
                type: "POST",
                headers: {
                    "RequestVerificationToken": '@GetAntiXsrfRequestToken()'
                },
                url: urls,
                data: { domain: TipoClienteViewModels },
                success: function (data) {
                    getSubFamilias($('#familia').val());
                    $('#modalTipoCliente').modal('hide');
                },
                error: function (err, scnd) {
                    console.log(err.statusText);
                }
            });
        }
    }
    //guardar familia del tipo del cliente
    function btnEditarFamilia() {
        if (ValidarDatos() == true) {
            var nombre = "";
            nombre = $("#nombreCliente").val();
            var TipoClienteViewModels = {
                id: $('#idCliente').val(),
                idPadre: null,
                nombre: nombre,
                inactivo: false
            };
            var urls = '@Url.Action("EditarTipoCliente", "TipoCliente")';
            $.ajax({
                type: "POST",
                headers: {
                    "RequestVerificationToken": '@GetAntiXsrfRequestToken()'
                },
                url: urls,
                data: { domain: TipoClienteViewModels },
                success: function (data) {
                    getFamilias($('#tipoClientes').val());
                    $('#modalTipoCliente').modal('hide');
                },
                error: function (err, scnd) {
                    console.log(err.statusText);
                }
            });
        }
    }

    //guardar tipo cliente

    function btnEditarTipoCliente() {
        //agregar familia

        var nombre = "";
        nombre = $("#nombreCliente").val();
        /*
        if ($('#idPadre').val() == 0 && nombre != true) {

            var TipoClienteViewModel = {
                id: null,
                idPadre: $('#idFamilia').val(),
                nombre: nombre,
                inactivo: false
            };
        } else if ($('#IdPadreFamilia').val() != 0 && nombre != true) {


        }*/
        if (ValidarDatos() == true) {
            var TipoClienteViewModel = {
                id: $('#idCliente').val(),
                idPadre: 0,
                nombre: nombre,
                inactivo: false
            };
            var url = '@Url.Action("EditarTipoCliente", "TipoCliente")';
            $.ajax({
                type: "POST",
                headers: {
                    "RequestVerificationToken": '@GetAntiXsrfRequestToken()'
                },
                url: url,
                data: { domain: TipoClienteViewModel },
                success: function (data) {

                    getTiposClientes();
                    getFamilias(data);
                    getSubFamilias(data);
                    $('#modalTipoCliente').modal('hide');
                },
                error: function (err, scnd) {
                    console.log(err.statusText);
                }
            });
        }
    }
    function ValidarDatos() {
        if ($('#nombreCliente').val() == "") {
            $('#AlertEditarNombre').empty();
            $('#AlertEditarNombre').append('<span class="danger-text">El Nombre es requerido.</span>');
            return false;
        }

        return true;
    }
</script>